<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nhập thông tin loại hàng</title>

  <!-- Font + Tailwind -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind = window.tailwind || {};
    tailwind.config = { theme: { extend: { boxShadow:{ soft:'0 8px 30px rgba(15,23,42,.08)' } } } };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <style>
    body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
    .err{ outline: 2px solid #ef4444; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">

  <!-- ===== Sidebar (z-50 để luôn nổi trên overlay) ===== -->
  <aside class="fixed inset-y-0 left-0 w-24 bg-white border-r border-slate-200 flex flex-col items-center gap-4 p-4 z-50 text-blue-600">
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Trang chủ"><i data-feather="home"></i></button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Theo dõi vị trí"><i data-feather="map"></i></button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Lịch sử giao dịch"><i data-feather="file-text"></i></button>
    <button class="relative w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Thông báo">
      <i data-feather="bell"></i>
      <span class="absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full"></span>
    </button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Người dùng"><i data-feather="user"></i></button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" title="Cài đặt"><i data-feather="settings"></i></button>
  </aside>

  <!-- ===== Main + Header ===== -->
  <main class="ml-24">
    <!-- Topbar (sticky, trắng đặc) -->
    <div id="topbar" class="sticky top-0 z-50 flex items-center justify-end p-3 bg-white border-b border-slate-200">
      <button type="button"
              class="group inline-flex items-center gap-2 pl-1 pr-2 py-1.5 rounded-full
                     bg-blue-50 text-slate-900 ring-1 ring-blue-100 shadow-sm hover:bg-blue-100 transition">
        <img src="https://i.pravatar.cc/40?img=8" alt="Avatar"
             class="w-8 h-8 rounded-full object-cover ring-2 ring-white shadow-sm" />
        <span class="font-semibold">Khách hàng A</span>
        <span class="text-slate-300">•</span>
        <i data-feather="chevron-down" class="w-4 h-4 opacity-80 group-hover:opacity-100"></i>
      </button>
    </div>
  </main>

  <!-- ===== OVERLAY FULL-KHU VỰC (KHÔNG che sidebar + header) ===== -->
  <div id="sheet" class="fixed z-40"
       style="top: var(--topbar-h,56px); left: var(--sidebar-w,96px); right: 0; bottom: 0;">
    <div class="absolute inset-0 bg-black/40"></div>

    <div class="absolute inset-0 p-6 overflow-hidden">
      <div class="relative w-full h-full bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-auto">
        <div class="sticky top-0 z-10 flex items-center justify-between px-6 py-3 bg-slate-100 border-b border-slate-200 rounded-t-2xl">
          <h2 class="text-[22px] font-bold tracking-tight">Commodity Information</h2>
          <button id="closeSheet" class="size-8 grid place-items-center rounded-full border border-slate-300 text-slate-700" aria-label="Đóng">✕</button>
        </div>

        <div class="px-6 pt-6 pb-8">
          <form id="form" class="grid grid-cols-12 gap-x-8 gap-y-6" novalidate>

            <!-- Hàng 1 -->
            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="productName">Product Name</label>
              <input id="productName" type="text" placeholder="VD: Gia vị, Thực phẩm,…"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="commodityType">Commodity Type</label>
              <input id="commodityType" type="text" placeholder="VD: Khô, lạnh, Nguy hiểm,…"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="weight">Weight (in lbs)</label>
              <input id="weight" type="number" min="0" step="0.01" placeholder="Nhập cân nặng"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <!-- Hàng 2 -->
            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="category">Category</label>
              <input id="category" type="text" placeholder="Loại"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="dimensionUnit">Dimension Unit</label>
              <select id="dimensionUnit" class="w-full h-11 rounded-md border border-slate-300 px-3 bg-white focus:outline-none" required>
                <option value="">Chọn đơn vị</option>
                <option>inch</option>
                <option>cm</option>
                <option>mm</option>
              </select>
            </div>

            <div class="col-span-12 md:col-span-4">
              <label class="block text-sm font-semibold mb-1" for="dimensions">Dimensions (L × B × H)</label>
              <input id="dimensions" type="text" placeholder="20 × 30 × 40"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <!-- Hàng 3 -->
            <div class="col-span-12">
              <label class="block text-sm font-semibold mb-1" for="desc">Product Description</label>
              <input id="desc" type="text" placeholder="Nhập mô tả hàng hóa"
                     class="w-full h-11 rounded-md border border-slate-300 px-3 placeholder:text-slate-400 focus:outline-none" required />
            </div>

            <!-- Banner phê duyệt (ẨN ban đầu) -->
            <div class="col-span-12">
              <div id="approval" class="hidden w-[560px] max-w-full mx-auto flex items-center justify-between gap-4 bg-green-200/70 border border-green-300 rounded-md px-4 py-3">
                <p class="text-green-800 font-semibold">Đơn hàng của bạn đã được phê duyệt</p>
                <div class="flex items-center gap-2">
                  <a href="giao_dien_thanh_toan_qr_fixed.html" id="toPayment" class="text-xs font-semibold bg-yellow-300 text-yellow-900 px-2 py-1 rounded">Tới bước thanh toán</a>
                  <span class="inline-grid place-items-center size-8 rounded-full bg-green-500 text-white text-lg">✓</span>
                </div>
              </div>
            </div>

            <!-- Nút OK -->
            <div class="col-span-12">
              <button id="okBtn" type="button" class="w-full h-12 rounded-md bg-blue-600 text-white font-semibold">OK</button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Script: đo sidebar/header để chừa overlay đúng kích thước + render Feather + logic OK -->
  <script>
    function setOffsets(){
      const aside = document.querySelector('aside');
      const topbar = document.getElementById('topbar');
      document.documentElement.style.setProperty('--sidebar-w', (aside?.offsetWidth || 96) + 'px');
      document.documentElement.style.setProperty('--topbar-h', (topbar?.offsetHeight || 56) + 'px');
    }

    function validateForm() {
      const reqIds = ['productName','commodityType','weight','category','dimensionUnit','dimensions','desc'];
      let firstInvalid = null;
      reqIds.forEach(id => {
        const el = document.getElementById(id);
        const ok = !!(el.value && el.value.toString().trim());
        el.classList.toggle('err', !ok);
        if (!ok && !firstInvalid) firstInvalid = el;
      });
      if (firstInvalid) firstInvalid.focus();
      return !firstInvalid;
    }

    window.addEventListener('load', () => {
      setOffsets();
      if (window.feather) feather.replace({ width: 24, height: 24 });

      document.getElementById('okBtn').addEventListener('click', () => {
        if (!validateForm()) return;
        const approval = document.getElementById('approval');
        approval.classList.remove('hidden');
        approval.scrollIntoView({behavior:'smooth', block:'center'});
      });

      document.getElementById('closeSheet').addEventListener('click', () => {
        window.location.href = 'Chon xe.html';
      });

      // xóa viền đỏ khi người dùng nhập lại
      document.getElementById('form').addEventListener('input', (e) => {
        if (e.target.classList.contains('err') && e.target.value.trim()) {
          e.target.classList.remove('err');
        }
      });
    });

    window.addEventListener('resize', setOffsets);
  </script>
</body>
</html>

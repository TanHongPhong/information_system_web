<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Theo dõi đơn hàng</title>

<!-- Fonts + Tailwind -->
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
<script>
  tailwind = window.tailwind || {};
  tailwind.config = {
    theme: { extend: {
      fontFamily:{ sans:["Inter","ui-sans-serif","system-ui"] },
      boxShadow:{ soft:"0 8px 30px rgba(15,23,42,.08)" }
    } }
  };
</script>
<script src="https://cdn.tailwindcss.com"></script>
<!-- Feather Icons -->
<script src="https://unpkg.com/feather-icons"></script>

<style>
  body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
  .dash-marker{ position:absolute; width:3px; top:-10px; bottom:-10px; border-radius:2px;
    background-image:repeating-linear-gradient(to bottom, rgba(100,116,139,.95) 0 12px, transparent 12px 18px);
    filter: drop-shadow(0 0 1px rgba(15,23,42,.25)); pointer-events:none; }
  .order-scroll{ scrollbar-width:thin; scrollbar-color:rgba(2,6,23,.35) transparent; }
  .order-scroll::-webkit-scrollbar{ width:8px; }
  .order-scroll::-webkit-scrollbar-thumb{ background:rgba(2,6,23,.18); border-radius:8px; }
  .order-scroll:hover::-webkit-scrollbar-thumb{ background:rgba(2,6,23,.35); }
  @media (min-width:1024px){ html, body{ overflow:hidden; } }

  /* Tooltip cho sidebar */
  .tip{position:absolute;left:62px;top:50%;transform:translateY(-50%);
    padding:6px 10px;background:#111827;color:#fff;font-size:12px;line-height:1;
    border-radius:8px;white-space:nowrap;box-shadow:0 8px 20px rgba(0,0,0,.18);
    opacity:0;pointer-events:none;transition:opacity .18s, transform .18s}
  .group:hover .tip{opacity:1;transform:translateY(-50%) translateX(4px)}
</style>
</head>
<body class="bg-slate-50 text-slate-900">

<!-- Sidebar -->
<aside class="fixed inset-y-0 left-0 w-24 bg-white border-r border-slate-200 flex flex-col items-center gap-4 p-4 z-50">
  <div class="flex flex-col items-center gap-4 text-blue-600">
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100 group relative" data-home="true" data-nav="home" aria-label="Trang chủ">
      <i data-feather="home"></i><span class="tip">Trang chủ</span>
    </button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100 group relative" data-nav="track" aria-label="Theo dõi đơn hàng">
      <i data-feather="map"></i><span class="tip">Theo dõi đơn hàng</span>
    </button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100 group relative" data-nav="history" aria-label="Lịch sử giao dịch">
      <i data-feather="file-text"></i><span class="tip">Lịch sử giao dịch</span>
    </button>
    <button class="relative w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" aria-label="Thông báo">
      <i data-feather="bell"></i><span class="absolute top-2.5 right-2.5 w-2 h-2 bg-red-500 rounded-full"></span>
    </button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" aria-label="Người dùng"><i data-feather="user"></i></button>
    <button class="w-12 h-12 rounded-xl grid place-items-center hover:bg-slate-100" aria-label="Cài đặt"><i data-feather="settings"></i></button>
  </div>
</aside>

<main class="ml-24 lg:overflow-hidden">
  <!-- Topbar -->
  <div id="topbar" class="sticky top-0 z-50 flex items-center justify-end p-3 bg-white/90 backdrop-blur-sm border-b border-slate-200">
    <button type="button" class="group inline-flex items-center gap-2 pl-1 pr-2 py-1.5 rounded-full bg-blue-50 text-slate-900 ring-1 ring-blue-100 shadow-sm hover:bg-blue-100">
      <img src="https://i.pravatar.cc/40?img=8" alt="Avatar" class="w-8 h-8 rounded-full object-cover ring-2 ring-white shadow-sm"/>
      <span class="font-semibold">Khách hàng A</span>
      <span class="text-slate-300">•</span>
      <i data-feather="chevron-down" class="w-4 h-4 opacity-80 group-hover:opacity-100"></i>
    </button>
  </div>

  <!-- Lưới 3 cột -->
  <div class="p-4 grid grid-cols-12 gap-4">

    <!-- CỘT TRÁI: ORDER SEARCH (header sticky trong card) -->
    <section class="col-span-12 lg:col-span-3">
      <div class="sticky top-[calc(var(--topbar-h,56px)+16px)]">
        <div class="order-scroll max-h-[calc(100dvh-var(--topbar-h,56px)-2rem)] overflow-y-auto pr-1">

          <div class="bg-white border border-slate-200 rounded-2xl p-3 relative">
            <!-- ================== STICKY HEADER ================== -->
            <div class="sticky top-0 z-10 -m-3 p-3 bg-white/95 backdrop-blur rounded-t-2xl border-b border-slate-200">
              <div class="flex items-center justify-between gap-3">
                <h3 class="font-semibold tracking-tight">ORDER SEARCH</h3>
                <div class="relative flex-1">
                  <input class="h-9 w-full rounded-lg border border-slate-300 pl-8 pr-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-200" placeholder="Tìm kiếm"/>
                  <i data-feather="search" class="absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"></i>
                </div>
              </div>
              <div class="mt-3 flex items-center gap-2 text-xs">
                <button class="px-2.5 py-1 rounded-full ring-1 ring-slate-200 bg-white text-slate-700">Active</button>
                <button class="px-2.5 py-1 rounded-full ring-1 ring-slate-200 bg-white text-slate-700">Arriving</button>
                <button class="px-2.5 py-1 rounded-full ring-1 ring-slate-200 bg-white text-slate-700">Departed</button>
              </div>
            </div>
            <!-- ================== LIST ================== -->
            <div class="mt-3 space-y-3">
              <!-- Item active -->
              <article class="rounded-xl border border-blue-200 bg-blue-50/40 p-3">
                <div class="flex items-center justify-between gap-2">
                  <div class="flex items-center gap-2 flex-1 min-w-0 overflow-hidden">
                    <span class="inline-grid place-items-center w-8 h-8 rounded-lg bg-blue-100 text-[#1E66FF]">
                      <i data-feather="truck" class="w-4.5 h-4.5"></i>
                    </span>
                    <div class="text-sm min-w-0">
                      <div class="flex items-center gap-2 flex-wrap">
                        <a href="#" class="font-semibold text-slate-800">ShipID-0123</a>
                        <span class="text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-[#1E66FF]">Arriving</span>
                      </div>
                      <div class="text-[11px] text-slate-500 leading-snug">
                        <div>DL04MP7045</div>
                        <div class="whitespace-nowrap">Tải trọng tối đa 6.5 tấn</div>
                      </div>
                    </div>
                  </div>
                  <button title="Đang theo dõi" class="shrink-0 w-8 h-8 rounded-full grid place-items-center bg-[#1E66FF] text-white ring-1 ring-blue-500/30 hover:brightness-105">
                    <i data-feather="eye" class="w-4 h-4"></i>
                  </button>
                </div>
                <div class="mt-3 grid grid-cols-12 gap-2">
                  <div class="col-span-8">
                    <ul class="space-y-1.5 text-xs text-slate-600">
                      <li class="flex items-start gap-2"><span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-blue-500"></span>Departure: TP.Hồ Chí Minh</li>
                      <li class="flex items-start gap-2"><span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-blue-500"></span>Stop 01: Quảng Ngãi</li>
                      <li class="flex items-start gap-2"><span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-blue-500"></span>Stop 02: Thanh Hóa</li>
                      <li class="flex items-start gap-2"><span class="mt-0.5 w-1.5 h-1.5 rounded-full bg-blue-500"></span>Arrival: Hà Nội</li>
                    </ul>
                  </div>
                  <div class="col-span-4">
                    <img src="https://s3.cloud.cmctelecom.vn/tinhte2/2020/08/5100688_ban_do_tphcm.jpg" alt="Mini map" class="w-full h-20 rounded-lg object-cover border border-slate-200"/>
                  </div>
                </div>
                <div class="mt-3 flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <img src="https://i.pravatar.cc/24?img=12" alt="user" class="w-6 h-6 rounded-full"/>
                    <span class="text-[11px] text-slate-500">Shipper's ID <span class="font-medium text-slate-700">:Drive-012345</span></span>
                  </div>
                  <button class="w-7 h-7 rounded-full grid place-items-center border border-slate-200 bg-white hover:bg-slate-50" title="Gọi">
                    <i data-feather="phone" class="w-4.5 h-4.5 text-slate-600"></i>
                  </button>
                </div>
                <div class="mt-2 text-right"><a href="#" class="text-[11px] text-blue-600 hover:underline">Chi tiết</a></div>
              </article>

              <!-- Template items -->
              <template id="ship-item">
                <article class="rounded-xl border border-slate-200 bg-white p-3">
                  <div class="flex items-center justify-between gap-2">
                    <div class="flex items-center gap-2">
                      <span class="inline-grid place-items-center w-8 h-8 rounded-lg bg-blue-50 text-[#1E66FF]">
                        <i data-feather="truck" class="w-4.5 h-4.5"></i>
                      </span>
                      <div class="text-sm">
                        <div class="flex items-center gap-2 flex-wrap">
                          <a href="#" class="font-semibold text-slate-800">ShipID-012X</a>
                          <span class="text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-[#1E66FF]">Arriving</span>
                        </div>
                        <div class="text-[11px] text-slate-500 leading-snug">
                          <div>DL04MP7045</div>
                          <div>Tải trọng tối đa 6.5 tấn</div>
                        </div>
                      </div>
                    </div>
                    <button title="Theo dõi" class="shrink-0 w-8 h-8 rounded-md grid place-items-center ring-1 ring-slate-200 hover:bg-slate-50">
                      <i data-feather="eye" class="w-4 h-4"></i>
                    </button>
                  </div>
                  <div class="mt-2 text-right"><a class="text-[11px] text-blue-600 hover:underline" href="#">Chi tiết</a></div>
                </article>
              </template>
              <div id="list-more" class="space-y-3"></div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- CỘT GIỮA: SHIPMENT -->
    <section class="col-span-12 lg:col-span-6">
      <div id="shipmentCard" class="bg-white border border-slate-200 rounded-2xl p-3">
        <div class="flex items-center justify-between">
          <div>
            <div class="text-sm text-slate-500">Shipment ID</div>
            <h2 class="text-xl font-semibold">SHIPID-0123</h2>
          </div>
          <button class="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 text-[#1E66FF] ring-1 ring-blue-100 hover:bg-blue-100">
            <i data-feather="book" class="w-4.5 h-4.5"></i><span class="text-sm font-medium">Documentation</span>
          </button>
        </div>

        <div class="mt-3 relative rounded-xl overflow-hidden ring-1 ring-slate-200 h-[520px]">
          <img src="https://s3.cloud.cmctelecom.vn/tinhte2/2020/08/5100688_ban_do_tphcm.jpg" alt="Map" class="absolute inset-0 w-full h-full object-cover select-none"/>
          <svg class="absolute inset-0 w-full h-full pointer-events-none" viewBox="0 0 900 640" preserveAspectRatio="none">
            <polyline points="140,520 210,465 290,410 350,370 420,330 490,290 560,250 620,220 690,190 760,160"
                      fill="none" stroke="#1E66FF" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"></polyline>
            <circle cx="140" cy="520" r="12" fill="#1E66FF"></circle>
            <circle cx="760" cy="160" r="12" fill="#1E66FF"></circle>
          </svg>
        </div>
      </div>
    </section>

    <!-- CỘT PHẢI: STATUS + VEHICLE -->
    <section id="rightCol" class="col-span-12 lg:col-span-3">
      <div class="sticky top-[calc(var(--topbar-h,56px)+16px)]">
        <div class="order-scroll max-h-[calc(100dvh-var(--topbar-h,56px)-2rem)] overflow-y-auto pr-1">
          <div class="space-y-4">

            <!-- ========== STATUS: stepper 4 checkpoint ========== -->
            <div class="bg-white border border-slate-200 rounded-2xl p-3">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold">Status</h3>
                <button id="btnRefresh" class="px-3 py-1.5 rounded-lg ring-1 ring-slate-200 hover:bg-slate-50 text-sm">Làm mới</button>
              </div>
              <!-- labels -->
              <ol class="mt-3 grid grid-cols-4 text-xs text-slate-600">
                <li>TP.Hồ Chí Minh</li>
                <li class="text-center">Quảng Ngãi</li>
                <li class="text-center">Thanh Hóa</li>
                <li class="text-right">Hà Nội</li>
              </ol>
              <!-- progress track + checkpoints -->
              <div class="mt-2 relative h-6 rounded-2xl bg-slate-100 ring-1 ring-slate-200">
                <div id="statusProgress" class="absolute left-0 top-0 h-full w-3/5 rounded-2xl bg-gradient-to-r from-[#0B43C6] via-[#2F78FF] to-[#8AB8FF] shadow-[inset_0_1px_0_rgba(255,255,255,.35)]"></div>
                <!-- checkpoints -->
                <span class="absolute top-1/2 -translate-y-1/2 left-0 -ml-0.5 w-px h-6 bg-slate-400/70 rounded"></span>
                <span class="absolute top-1/2 -translate-y-1/2 left-1/3 -ml-0.5 w-px h-6 bg-slate-400/70 rounded"></span>
                <span class="absolute top-1/2 -translate-y-1/2 left-2/3 -ml-0.5 w-px h-6 bg-slate-400/70 rounded"></span>
                <span class="absolute top-1/2 -translate-y-1/2 right-0 -mr-0.5 w-px h-6 bg-slate-400/70 rounded"></span>
                <!-- ETA bubble -->
                <div id="etaBubble" class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 rounded-lg bg-slate-200/70 text-slate-800 text-[13px] font-medium">12 Hrs Left</div>
              </div>
              <!-- times -->
              <ol class="mt-2 grid grid-cols-4 text-[11px] text-slate-500">
                <li>08:15</li><li class="text-center">11:40</li><li class="text-center">19:10</li><li class="text-right">ETA 02:40</li>
              </ol>
            </div>

            <!-- Vehicle details -->
            <div class="bg-white border border-slate-200 rounded-2xl p-3">
              <div class="flex items-center justify-between">
                <h3 class="font-semibold">Vehicle Details</h3>
                <button class="px-3 py-1.5 rounded-lg ring-1 ring-slate-200 hover:bg-slate-50 text-sm">Xem thông tin công ty</button>
              </div>
              <div class="mt-3 flex items-start gap-3">
                <div class="shrink-0 w-10 h-10 rounded-full ring-1 ring-slate-200 grid place-items-center">
                  <span class="text-[10px] font-semibold text-slate-500">LOGO</span>
                </div>
                <div class="text-sm">
                  <div class="font-semibold">Container 1000KG</div>
                  <div class="text-[12px] text-slate-500">Biển số: <span class="text-slate-700">50AĐ-767.72</span></div>
                  <div class="text-[12px] text-slate-500">Shipment ID: <span class="text-slate-700">SHIP001234</span></div>
                  <div class="text-[12px] text-slate-500">Mã đơn hàng: <span class="text-slate-700">DL04MP7045</span></div>
                </div>
              </div>
              <div class="mt-3 rounded-xl ring-1 ring-slate-200 overflow-hidden bg-white">
                <img src="https://png.pngtree.com/background/20250120/original/pngtree-d-rendering-of-an-isolated-white-truck-seen-from-the-side-picture-image_13354856.jpg" alt="Truck" class="block w-full h-auto object-contain bg-white"/>
              </div>
              <div class="mt-3 grid grid-cols-2 gap-x-4 gap-y-1 text-[12px]">
                <div>Trọng tải <span class="font-semibold text-slate-800">6.5 tấn</span></div>
                <div class="text-right">Chiều rộng hàng <span class="font-semibold text-slate-800">4.8 mét</span></div>
                <div>Thể tích hàng <span class="font-semibold text-slate-800">35,393 lít</span></div>
                <div class="text-right">Chiều dài hàng <span class="font-semibold text-slate-800">11.7 mét</span></div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

  </div>
</main>

<script>
  // set CSS var topbar height
  function setTopbarHeight(){
    const topbar=document.getElementById('topbar');
    if(topbar) document.documentElement.style.setProperty('--topbar-h', topbar.offsetHeight+'px');
  }

  window.addEventListener('load', ()=>{
    setTopbarHeight();
    if (window.feather) feather.replace({ width:24, height:24 });

    // render thêm danh sách
    const ctn = document.getElementById('list-more');
    if (ctn){
      const tpl = document.getElementById('ship-item').content;
      ['0124','0125','0126','0127','0128','0129','0130','0131','0132','0133'].forEach(id=>{
        const node = tpl.cloneNode(true);
        node.querySelector('a.font-semibold').textContent = `ShipID-${id}`;
        ctn.appendChild(node);
      });
      if (window.feather) feather.replace({ width:24, height:24 });
    }

    // demo cập nhật tiến độ (0–1)
    const progress = document.getElementById('statusProgress');
    const bubble = document.getElementById('etaBubble');
    const p = 0.60; // 60%
    if(progress){ progress.style.width = (p*100)+'%'; }
    if(bubble){ bubble.style.right = 'max(8px, calc(100% - '+(p*100)+'% + 8px))'; }
  });

  window.addEventListener('resize', setTopbarHeight);

  // Sidebar Navigation
  document.addEventListener('DOMContentLoaded', function () {
    function go(ref){ window.location.href = ref; }
    const bHome = document.querySelector('aside [data-nav="home"]');
    const bTrack = document.querySelector('aside [data-nav="track"]');
    const bHistory = document.querySelector('aside [data-nav="history"]');
    if (bHome) bHome.addEventListener('click', e=>{e.preventDefault(); go('demo5.html');});
    if (bTrack) bTrack.addEventListener('click', e=>{e.preventDefault(); go('theo doi don hang.html');});
    if (bHistory) bHistory.addEventListener('click', e=>{e.preventDefault(); go('lich su giao dich.html');});
  });
</script>
</body>
</html>
